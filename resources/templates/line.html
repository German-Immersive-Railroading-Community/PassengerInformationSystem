<!DOCTYPE html>
<html>
    <head>
    	<div th:replace="components :: head"></div>
        <title th:text="'PIS - ' + ${line.getName()}"></title>
    </head>
    <body>
		<div th:replace="components :: menu"></div>
        <script>setMenuFocus("Lines")</script>
        <script>reload()</script>

        <div class="container">
        	<div class="box box-table">
				<table style="height: 1px;">
					<tr>
						<td class="title" colspan="2" th:text="${line.departure}"></td>
						<td style="padding: 10px 0px !important"><span th:text="'+' + ${line.delay}" th:if="${line.delay} > 1 and !${line.cancelled}" th:classappend="${line.delay} > 5 ? red-text : yellow-text"></span></td>
						<td style="width: 100%;">
							<span class="title" th:text="${line.getName()}"></span>&nbsp; 
							<label class="red" th:if="${line.cancelled}">CANCELLED</label>
							<i class="grey-text" style="white-space: nowrap;" th:text="'from ' + ${line.getFirstStation().name}" th:unless="${line.stations.isEmpty()}"></i>
						</td>
					</tr>
					<s class="red-text"></s>
					<tr class="height-100" th:each="station : ${line.stations}">
						<td style="padding: 0px;"><div style="box-sizing: border-box; height: 100%; margin-left: 10px;" th:classappend="${station.getStatusColor(line)}">&nbsp;</div></td>
						<td css="float-right">
							<span th:text="${station.departure}" th:unless="${station.cancelled}"></span>
							<s class="red-text" th:text="${station.departure}" th:if="${station.cancelled}"></s>
						</td>
						<td style="padding: 10px 0px !important"><span th:text="'+' + ${station.delay}" th:if="${station.delay} > 1 and !${line.cancelled} and !${station.cancelled}" th:classappend="${station.delay} > 5 ? red-text : yellow-text"></span></td>
						<td>
							<a class="grey" th:href="@{'/stations/' + ${station.id}}" th:text="${station.name}" th:unless="${station.cancelled}"></a>
							<s class="red-text" th:text="${station.name}" th:if="${station.cancelled}"></s>
							&nbsp;
							<i class="grey-text" th:text="' Pl.' + ${station.platform}" th:unless="${station.changedPlatform} != 0 and ${station.changedPlatform} != ${station.platform} and !${line.cancelled} or ${station.cancelled}"></i>
							<i class="red-text" th:if="${station.changedPlatform} != 0 and ${station.changedPlatform} != ${station.platform} and !${line.cancelled} or ${station.cancelled}">
								<s class="red-text" th:text="' Pl.' + ${station.platform}"></s>
								<i class="red-text" th:text="' Pl.' + ${station.changedPlatform}" th:unless="${station.cancelled}"></i>
							</i>
						</td>
					</tr>
				</table>
				<div style="display:flex; gap: 20px;">
					<div class="width-100">
						<span>ID: </span><span class="transparent-blue" style="padding: 0px 5px; border-radius: 5px;" th:text="${line.id}"></span><br>
						<span>Type: </span><i th:text="${line.type.getName()}"></i><br>
						<span>Number: </span><i th:text="${line.number}"></i><br>
						<span>Operator: </span><i th:text="${line.operator}"></i><br>
						<span>Driver: </span><i th:text="${line.driver}"></i><br>
					</div>
					<a class="not-mobile" style="margin-top: auto;" target="blank" th:href="@{'/api/lines/' + ${line.id}}">Raw Line Data ></a>
				</div>
			</div>
        </div>

    </body>
</html>